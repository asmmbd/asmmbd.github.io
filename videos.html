<!DOCTYPE html>
<html lang="bn" x-data="videoApp()">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ভিডিও লাইব্রেরি - আল-হেরা স্টুডেন্ট নেটওয়ার্ক</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body {
      font-family: 'Hind Siliguri', sans-serif;
      padding-top: 60px;
    }
    
    .video-player-container {
      transition: all 0.3s ease;
    }
    
    
    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .video-thumbnail {
      transition: transform 0.3s ease;
    }
    
    .video-card:hover .video-thumbnail {
      transform: scale(1.03);
    }
  </style>
</head>

<body class="bg-gray-100">
  <!-- হেডার -->
  <header class="bg-green-800 text-white shadow-lg fixed top-0 left-0 right-0 z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <img src="./images/logo.jpg" alt="লোগো" class="h-10 rounded-full">
        <h1 class="text-lg font-bold">আল-হেরা ভিডিও লাইব্রেরি</h1>
      </div>
      <div class="flex items-center space-x-4">
        <div class="relative hidden md:block">
          <input type="text" placeholder="ভিডিও খুঁজুন..." class="bg-green-700 text-white placeholder-green-200 rounded-full px-4 py-2 pl-10 focus:outline-none focus:bg-white focus:text-gray-800 w-64 transition">
          <i class="fas fa-search absolute left-3 top-3 text-green-200"></i>
        </div>
        <button @click="showUploadModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center">
          <i class="fas fa-upload mr-2"></i> আপলোড
        </button>
      </div>
    </div>
  </header>
  
  <!-- ভিডিও প্লেয়ার (ফিক্সড টপ) -->
  <div x-show="currentVideo" x-transition class="video-player-container" :class="isMinimized ? 'w-48 h-32 rounded-lg fixed bottom-20 right-2 z-50 overflow-hidden' : 'w-full fixed top-0 left-0 z-50'">
    <div class="shadow-lg">
      <div x-show="!isMinimized" class="flex justify-between items-center bg-gray-800 text-white px-3 py-2">
        <div class="flex space-x-2">
          <button @click="toggleMinimize()" class="text-white hover:text-gray-300">
            <i :class="isMinimized ? 'fas fa-expand' : 'fas fa-compress'"></i>
          </button>
          <button @click="closeVideo()" class="text-white hover:text-gray-300">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div :class="isMinimized ? 'w-full h-full z-50 rounded-lg' : 'w-full h-52 bg-black'">
        <iframe x-show="!isMinimized" :src="'https://www.youtube.com/embed/' + getYouTubeId(currentVideo?.youtube_url) + '?autoplay=1'" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="w-full h-full"></iframe>
        <div x-show="isMinimized" class="w-full h-full bg-white z-50 relative rounded-lg">
          <img :src="currentVideo?.thumbnail" :alt="currentVideo?.title" class="w-full h-full opacity-100 z-50 rounded-lg">
          <button @click="toggleMinimize()" class="absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-white text-2xl">
            <i class="fas fa-expand"></i>
          </button>
          <button @click="closeVideo()" class="absolute top-2 right-2 text-white text-2xl">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div x-show="!isMinimized" class="p-3 bg-white">
        
        <h3 x-text="currentVideo?.title" class="font-medium truncate"></h3>
        <p x-text="currentVideo?.description" class="text-sm text-gray-700 line-clamp-2"></p>
      </div>
    </div>
  </div>
  
  <!-- মেইন কন্টেন্ট -->
  <main class="container mx-auto px-2 py-3" :class="{'mt-72' : !isMinimized && currentVideo}">
    <!-- ভিডিও ফিল্টার ট্যাব -->
    <div class="bg-white rounded-lg shadow mb-3 sticky top-16 z-40">
      <div class="flex overflow-x-auto">
        <button @click="activeCategory = 'all'" :class="{ 'border-b-2 border-green-600 text-green-600': activeCategory === 'all' }" class="flex-shrink-0 px-6 py-3">
          সব ভিডিও
        </button>
        <template x-for="category in categories" :key="category">
          <button @click="activeCategory = category" :class="{ 'border-b-2 border-green-600 text-green-600': activeCategory === category }" class="flex-shrink-0 px-6 py-3">
            <span x-text="category"></span>
          </button>
        </template>
      </div>
    </div>
    
    <!-- ভিডিও গ্রিড -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6">
      <template x-for="video in filteredVideos" :key="video.id">
        <div @click="playVideo(video)" class="video-card bg-white rounded-lg shadow overflow-hidden cursor-pointer transition z-20">
          <div class="relative z-40">
            <img loading="lazy" :src="video.thumbnail" :alt="video.title" class="video-thumbnail w-full h-40 object-cover z-10">
            <span class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-1 rounded">
              <span x-text="formatDuration(video.duration)"></span>
            </span>
            <div class="absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 bg-black bg-opacity-30 transition z-10">
              <span class="bg-white bg-opacity-80 text-green-600 rounded-full p-3">
                <i class="fas fa-play text-lg"></i>
              </span>
            </div>
          </div>
          <div class="p-3">
            <h3 class="font-medium line-clamp-2" x-text="video.title"></h3>
          </div>
        </div>
      </template>
    </div>
    
    <!-- ভিডিও না থাকলে মেসেজ -->
    <div x-show="filteredVideos.length === 0" class="bg-white rounded-lg shadow p-8 text-center">
      <i class="fas fa-video-slash text-4xl text-gray-300 mb-4"></i>
      <h3 class="text-xl font-bold text-gray-600">কোন ভিডিও পাওয়া যায়নি</h3>
      <p class="text-gray-500 mt-2">এই ক্যাটাগরিতে এখনো কোন ভিডিও আপলোড করা হয়নি</p>
    </div>
  </main>
  
  <!-- ভিডিও আপলোড মোডাল -->
  <div x-show="uploadModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div @click.outside="closeUploadModal()" class="bg-white rounded-lg w-full max-w-2xl overflow-hidden">
      <!-- মোডাল হেডার -->
      <div class="bg-green-800 text-white p-4 flex justify-between items-center">
        <h3 class="text-xl font-bold">নতুন ভিডিও আপলোড</h3>
        <button @click="closeUploadModal()" class="text-white hover:text-gray-200">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      
      <!-- পাসওয়ার্ড ভেরিফিকেশন স্টেপ -->
      <div x-show="!uploadVerified" class="p-6">
        <h4 class="font-bold text-lg mb-4 text-center">অনুমোদন প্রয়োজন</h4>
        <p class="text-gray-600 text-center mb-6">শুধুমাত্র অনুমোদিত ব্যবহারকারীরা ভিডিও আপলোড করতে পারবেন</p>
        
        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 mb-2">পাসওয়ার্ড</label>
            <input x-model="uploadPassword" type="password" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500">
            <p x-show="uploadError" class="text-red-500 text-sm mt-1" x-text="uploadError"></p>
          </div>
          
          <button @click="verifyUpload()" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-medium">
            যাচাই করুন
          </button>
        </div>
      </div>
      
      <!-- ভিডিও আপলোড ফর্ম (পাসওয়ার্ড ভেরিফাই হলে দেখাবে) -->
      <div x-show="uploadVerified" class="p-6">
        <div class="space-y-4">
          <div>
            <label class="block text-gray-700 mb-2">ভিডিও টাইটেল <span class="text-red-500">*</span></label>
            <input x-model="videoData.title" type="text" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500" placeholder="ভিডিওর শিরোনাম লিখুন">
          </div>
          
          <div>
            <label class="block text-gray-700 mb-2">ইউটিউব ভিডিও URL <span class="text-red-500">*</span></label>
            <input x-model="videoData.youtube_url" type="url" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500" placeholder="https://www.youtube.com/watch?v=...">
            <p class="text-gray-500 text-sm mt-1">আপাতত শুধুমাত্র ইউটিউব লিংক গ্রহণযোগ্য</p>
          </div>
          
          <div>
            <label class="block text-gray-700 mb-2">ভিডিও বিবরণ</label>
            <textarea x-model="videoData.description" rows="3" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500" placeholder="ভিডিওর বিবরণ লিখুন..."></textarea>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-gray-700 mb-2">ক্যাটাগরি</label>
              <select x-model="videoData.category" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500">
                <option value="">ক্যাটাগরি নির্বাচন করুন</option>
                <option value="lecture">লেকচার</option>
                <option value="tutorial">টিউটোরিয়াল</option>
                <option value="discussion">আলোচনা</option>
                <option value="event">ইভেন্ট</option>
                <option value="other">অন্যান্য</option>
              </select>
            </div>
            
            <div>
              <label class="block text-gray-700 mb-2">থাম্বনেইল</label>
              <input type="text" x-model="videoData.thumbnail" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500">
            </div>
          </div>
          
          <div>
            <label class="flex items-center space-x-2">
              <input x-model="videoData.duration" type="number" class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-1 focus:ring-green-500">
            </label>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6 pt-4 border-t">
          <button @click="closeUploadModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-100">
            বাতিল করুন
          </button>
          <button @click="submitVideo()" :disabled="!canSubmit" :class="{'bg-green-600 hover:bg-green-700': canSubmit, 'bg-gray-300 cursor-not-allowed': !canSubmit}" class="text-white px-4 py-2 rounded-lg">
            আপলোড করুন
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <nav x-show="!currentVideo || isMinimized" class="print:hidden fixed bottom-0 left-0 right-0 bg-white z-50 md:hidden rounded-t-lg shadow-md">
    <div class="flex h-16">
      <!-- হোম -->
      <a href="/" class="nav-item active flex flex-col items-center justify-center flex-1 relative">
        <div class="nav-icon mb-1">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 10L12 2L21 10V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <span class="text-xs mt-1">হোম</span>
      </a>
      
      <!-- ক্লাস রুটিন -->
      <a href="/" class="nav-item flex flex-col items-center justify-center flex-1 relative">
        <div class="nav-icon mb-1">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 4H5C3.89543 4 3 4.89543 3 6V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V6C21 4.89543 20.1046 4 19 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M16 2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M8 2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3 10H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M8 14H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M12 14H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M16 14H16.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M8 18H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M12 18H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M16 18H16.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <span class="text-xs mt-1">রুটিন</span>
      </a>
      
      <!-- অনলাইন ক্লাস (গুরুত্বপূর্ণ আইটেম) -->
      <a href="videos" class="nav-item flex flex-col items-center justify-center flex-1 relative">
        <div class="nav-icon mb-1">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M23 7L16 12L23 17V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M14 5H3C1.89543 5 1 5.89543 1 7V17C1 18.1046 1.89543 19 3 19H14C15.1046 19 16 18.1046 16 17V7C16 5.89543 15.1046 5 14 5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <span class="text-xs mt-1">অনলাইন ক্লাস</span>
      </a>
      
      <!-- ফলাফল -->
      <a href="/" class="nav-item flex flex-col items-center justify-center flex-1 relative">
        <div class="nav-icon mb-1">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 8V16M12 11V16M8 14V16M6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <span class="text-xs mt-1">ফলাফল</span>
      </a>
      
      <!-- প্রোফাইল -->
      <a href="/profile" class="nav-item flex flex-col items-center justify-center flex-1 relative">
        <div class="nav-icon mb-1">
          <svg class="size-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <span class="text-xs mt-1">প্রোফাইল</span>
      </a>
    </div>
    <div class="offline-alert w-full bg-red-600 text-white p-3 text-center hidden">
      আপনি অফলাইনে আছেন। কিছু ফিচার সীমিত থাকতে পারে।
    </div>
  </nav>
  <script>
    function videoApp() {
      return {
        currentVideo: null,
        isMinimized: false,
        activeCategory: 'all',
        uploadModal: false,
        uploadVerified: false,
        uploadPassword: '',
        correctPassword: 'alhera123', // আপনার পাসওয়ার্ড এখানে সেট করুন
        uploadError: '',
        videoData: {
          title: "",
          youtube_url: "",
          thumbnail: "",
          duration: 0,
          category: "",
          description: "",
        },
        videos: [
        {
          id: 1,
          title: "হাদিসের মৌলিক নীতিমালা - পর্ব ১ | আল-হেরা ইসলামিক স্টাডিজ",
          youtube_url: "https://youtu.be/aAS6kNcPYWo?si=ty9t87JzHXT72rsv",
          thumbnail: "./images/default-thumb.jpg",
          duration: 1254,
          category: "lecture",
          description: "এই ভিডিওতে আমরা হাদিস শাস্ত্রের মৌলিক নীতিমালা নিয়ে আলোচনা করব। বিশেষভাবে আমরা হাদিস গ্রহণ ও বর্জনের মানদণ্ড সম্পর্কে জানব।",
        },
        {
          id: 2,
          title: "হাদিসের মৌলিক নীতিমালা - পর্ব ১ | আল-হেরা ইসলামিক স্টাডিজ",
          youtube_url: "https://youtu.be/aAS6kNcPYWo?si=ty9t87JzHXT72rsv",
          thumbnail: "./images/default-thumb.jpg",
          duration: 1254,
          category: "lecture",
          description: "এই ভিডিওতে আমরা হাদিস শাস্ত্রের মৌলিক নীতিমালা নিয়ে আলোচনা করব। বিশেষভাবে আমরা হাদিস গ্রহণ ও বর্জনের মানদণ্ড সম্পর্কে জানব।",
        },
        {
          id: 3,
          title: "হাদিসের মৌলিক নীতিমালা - পর্ব ১ | আল-হেরা ইসলামিক স্টাডিজ",
          youtube_url: "https://youtu.be/aAS6kNcPYWo?si=ty9t87JzHXT72rsv",
          thumbnail: "./images/default-thumb.jpg",
          duration: 1254,
          category: "lecture",
          description: "এই ভিডিওতে আমরা হাদিস শাস্ত্রের মৌলিক নীতিমালা নিয়ে আলোচনা করব। বিশেষভাবে আমরা হাদিস গ্রহণ ও বর্জনের মানদণ্ড সম্পর্কে জানব।",
        },
        {
          id: 4,
          title: "হাদিসের মৌলিক নীতিমালা - পর্ব ১ | আল-হেরা ইসলামিক স্টাডিজ",
          youtube_url: "https://youtu.be/aAS6kNcPYWo?si=ty9t87JzHXT72rsv",
          thumbnail: "./images/default-thumb.jpg",
          duration: 1254,
          category: "lecture",
          description: "এই ভিডিওতে আমরা হাদিস শাস্ত্রের মৌলিক নীতিমালা নিয়ে আলোচনা করব। বিশেষভাবে আমরা হাদিস গ্রহণ ও বর্জনের মানদণ্ড সম্পর্কে জানব।",
        }],
        
        // কম্পিউটেড প্রপার্টিজ
        get categories() {
          return [...new Set(this.videos.map(v => v.category))];
        },
        get filteredVideos() {
          if (this.activeCategory === 'all') return this.videos;
          return this.videos.filter(v => v.category === this.activeCategory);
        },
        get canSubmit() {
          return this.videoData.title.trim() &&
            this.videoData.youtube_url.trim() &&
            this.getYouTubeId(this.videoData.youtube_url);
        },
        
        // মেথডস
        playVideo(video) {
          this.currentVideo = video;
          this.isMinimized = false;
          window.scrollTo({ top: 0, behavior: 'smooth' });
        },
        closeVideo() {
          this.currentVideo = null;
        },
        toggleMinimize() {
          this.isMinimized = !this.isMinimized;
        },
        formatDuration(seconds) {
          const mins = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        },
        getYouTubeId(url) {
          if (!url) return null;
          const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
          const match = url.match(regExp);
          return (match && match[2].length === 11) ? match[2] : null;
        },
        showUploadModal() {
          this.uploadModal = true;
          this.uploadVerified = false;
          this.uploadError = '';
          this.videoData = {
            title: "",
            youtube_url: "https://youtu.be/aAS6kNcPYWo?si=ty9t87JzHXT72rsv",
            thumbnail: "./images/default-thumb.jpg",
            duration: 0,
            category: "lecture",
            description: "",
          };
        },
        closeUploadModal() {
          this.uploadModal = false;
          this.uploadVerified = false;
          this.uploadError = '';
        },
        verifyUpload() {
          if (this.uploadPassword === this.correctPassword) {
            this.uploadVerified = true;
            this.uploadError = '';
          } else {
            this.uploadError = 'ভুল পাসওয়ার্ড! আবার চেষ্টা করুন';
          }
        },
        handleThumbnailUpload(event) {
          const file = event.target.files[0];
          if (file) {
            // Here you would typically upload the file and get the URL
            // For demo, we'll just show a placeholder
            this.videoData.thumbnail = './images/default-thumb.jpg';
          }
        },
        submitVideo() {
          if (!this.canSubmit) return;
          
          let newVideo = {
            id: this.videos.length + 1,
            ...this.videoData
          };
          // Add to videos array
          this.videos.unshift(newVideo);
          
          // Close modal and show success
          this.uploadModal = false;
          alert('ভিডিও সফলভাবে সাবমিট করা হয়েছে!');
          
          // Reset form
          this.videoData = {
            id: v.id,
            title: v.title,
            youtube_url: `https://youtu.be/${v.id}`,
            thumbnail: "./images/default-thumb.jpg",
            duration: 0,
            category: "lecture",
            description: v.content,
          };
        },
        init() {
          fetch('https://678ff67e49875e5a1a93fa27.mockapi.io/api/v1/media')
            .then(ress => ress.json())
            .then(data => {
              this.videos = data.map(v => {
                return {
                  id: v.id,
                  title: v.title,
                  youtube_url: `https://youtu.be/${v.id}`,
                  thumbnail: `https://i.ytimg.com/vi/${v.id}/hq720.jpg`,
                  duration: 0,
                  category: v.category,
                  description: v.content,
                }
              })
              
            })
        }
      };
    }
  </script>
</body>

</html>
